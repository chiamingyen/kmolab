Title: 協同產品設計實習期中報告
Category: Courses
Tags: 2016 Spring, 協同產品設計實習
Author: kmol

2016spring 的協同產品設計課程, 導入了 git 版次管理的 <a href="https://help.github.com/articles/adding-collaborators-to-a-personal-repository/">collaborator</a> (各組組長) 與 <a href="https://help.github.com/articles/using-pull-requests/">pull request</a> (各組組員)協同模式, 由於 Github 提供了免費的多人協同方案, 讓兩班 133 名學員(2a: 62, 2b: 71)可以各自在本地端與遠端的倉儲分支資料中進行改版.

<!-- PELICAN_END_SUMMARY -->

從 <a href="http://chiamingyen.github.io/kmolab/blog/tag/xie-tong-chan-pin-she-ji-shi-xi.html">協同產品設計實習課程 tag</a> 可以查閱與協同產品設計實習有關的頁面, <a href="http://chiamingyen.github.io/kmolab/blog/xie-tong-chan-pin-she-ji-shi-xi-de-wang-ji-2d-xie-tong-hui-tu.html">期中報告內容</a> (<a href="https://github.com/2015fallhw/cdw2/wiki/2016spring-CD-%E6%9C%9F%E4%B8%AD%E5%A0%B1%E5%91%8A%E5%85%A7%E5%AE%B9">cdw2 倉儲 wiki</a>) 則包含 2D/3D 鏈條零組件的繪圖, 2D 零件繪圖以 <a href="http://2015fallhw.github.io/arcidau/">Cango 繪圖程式庫</a>與 <a href="http://www.brython.info/">Brython 程式語言</a>為主, 實際的繪圖程式採用 <a href="http://flask.pocoo.org/">Flask 框架</a>, 可以在近端與 <a href="https://www.openshift.com/">Openshift 雲端</a>平台上執行繪圖. 至於 3D 零組件繪圖則要求在 <a href="https://www.onshape.com">Onshape 雲端 CAD</a> 系統中完成.

以下為期中報告的任務 (Task 1) 執行參考流程:

##網際協同 2D 零組件繪圖:

###計算鏈條輪廓圓弧相切點座標

以下符號式運算使用 sympy, 並且能夠直接在 <a href="https://github.com/jupyter/jupyterhub">Jupyter hub</a> 環境中執行, 若<a href="https://github.com/chiamingyen/kmol2016">隨身 Python3 程式環境</a>無 sympy 模組, 可以 pip install sympy 安裝.

假設上方圓弧圓心位於原點, 且鏈條輪廓上下垂直沒有轉角.

$(x1, y1)$ 設為左側圓弧的圓心座標, $(x2, y2)$ 則為上方圓弧與左側圓弧的相切點座標, $(x3, y3)$ 則為下方圓弧與左側圓弧的相切點座標.

$(x2-0)**2 + (y2-0)**2 - 7*7 = 0$, 表示 $(x2, y2)$ 位於圓心 (0, 0), 半徑 7 的圓上.

$(x1-x2)**2+(y1-y2)**2 -40**2 = 0$, 表示 $(x2, y2)$ 也同時位於圓心 $(x1, y1)$, 半徑 40 的圓上.

$(x1-x3)**2+(y1-y3)**2 -40**2 = 0$, 表示 $(x3, y3)$ 位於圓心 $(x1, y1)$, 半徑 40 的圓上.

$(x1-0)**2+(y1-0)**2 -47**2 = 0$, 表示 $(x1, y1)$ 與 (0, 0) 兩個圓弧的圓心距離為 (40+7).

$(x1)**2+(y1+20)**2 -47**2 = 0$, 表示 $(x1, y1)$ 與 (0, -20) 兩個圓弧的圓心距離也是 (40+7).

$x2 - x3 = 0$, 表示鏈條輪廓上下垂直沒有轉角, 所以 $x2 = x3$.

<pre class="brush: python;">
from sympy import *
# center ot radius 40
x1 = Symbol('x1')
y1 = Symbol('y1')
# upper tangent point
x2 = Symbol('x2')
y2 = Symbol('y2')
# lower tangent point
x3 = Symbol('x3')
y3 = Symbol('y3')
answer = solve([(x2-0)**2 + (y2-0)**2 - 7*7, (x1-x2)**2+(y1-y2)**2 -40**2, (x1-x3)**2+(y1-y3)**2 -40**2, (x1)**2+(y1)**2 -47**2, \
       (x1)**2+(y1+20)**2 -47**2, x2 -x3], [x1, y1, x2, y2, x3, y3])
group = 1
for i in answer:
    try:
        g.es("group", group, ":")
    except:
        print("group", group, ":")
    for j in i:
        try:
            g.es(j.evalf(5))
        except:
            print(j.evalf(5))
    group += 1
</pre>

計算出的結果:

<pre class="brush: xml;">
左邊半徑 40 的圓心座標 (-45.924, -10.000)
左上方的切點座標 (-6.8397, -1.4894)
左下方的切點座標 (-6.8397, -18.511)
右邊半徑 40 的圓心座標 (45.924, -10.000)
右上方切點座標 (6.8397, -1.4894)
右下方切點座標 (6.8397, -18.511)
</pre>

根據四個切點的座標, 利用 Cango 與 Brython 完成單一鍊條輪廓繪圖:

<pre class="brush: xml;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;網際 2D 繪圖&lt;/title&gt;
    &lt;!-- IE 9: display inline SVG --&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=9"&gt;
&lt;script type="text/javascript" src="http://brython.info/src/brython_dist.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango-8v03.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango2D-6v13.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/CangoAxes-1v33.js"&gt;&lt;/script&gt;
 
&lt;/head&gt;
&lt;body&gt;
 
&lt;script&gt;
window.onload=function(){
brython(1);
}
&lt;/script&gt;
 
&lt;canvas id="plotarea" width="800" height="800"&gt;&lt;/canvas&gt;
 
&lt;script type="text/python"&gt;
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
# 決定要不要畫座標軸線
cgo.drawAxes(0, 240, 0, 240, {
    "strokeColor":"#aaaaaa",
    "fillColor": "#aaaaaa",
    "xTickInterval": 20,
    "xLabelInterval": 20,
    "yTickInterval": 20,
    "yLabelInterval": 20})
 
deg = math.pi/180  
def O(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
 
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
 
    # 放大 5 倍
    cgo.render(cmbr, x, y, 5, rot)
 
O(0, 0, 0, 0, 0, "lightyellow", True, 4)
# 準備標示出4個點的座標 (放大 5 倍)
cgo.drawText("各點的座標值放大5倍", (-6.8397*5)-50, (-1.4894*5)+20, {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
# 左上角點
cgo.drawText("(-6.8397, -1.4894)", (-6.8397*5)-50, (-1.4894*5), {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (-6.8397*5), (-1.4894*5), {"fillColor": "red"})
# 右上角點
cgo.drawText("(6.8397, -1.4894)", (6.8397*5)+50, (-1.4894*5)+20, {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (6.8397*5), (-1.4894*5), {"fillColor": "red"})
# 左下角點
cgo.drawText("(-6.8397, -18.511)", (-6.8397*5)-50, (-18.511*5), {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (-6.8397*5), (-18.511*5), {"fillColor": "red"})
# 右下角點
cgo.drawText("(6.8397, -18.511)", (6.8397*5)+50, (-18.511*5), {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (6.8397*5), (-18.511*5), {"fillColor": "red"})
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

繪圖結果如下:

<script type="text/javascript" src="http://brython.info/src/brython_dist.js"></script>
<script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango-8v03.js"></script>
<script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango2D-6v13.js"></script>
<script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/CangoAxes-1v33.js"></script>
 
<script>
window.onload=function(){
brython(1);
}
</script>
 
<canvas id="plotarea" width="800" height="800"></canvas>
 
<script type="text/python">
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
# 決定要不要畫座標軸線
cgo.drawAxes(0, 240, 0, 240, {
    "strokeColor":"#aaaaaa",
    "fillColor": "#aaaaaa",
    "xTickInterval": 20,
    "xLabelInterval": 20,
    "yTickInterval": 20,
    "yLabelInterval": 20})
 
deg = math.pi/180  
def O(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
 
    # 放大 5 倍
    cgo.render(cmbr, x, y, 5, rot)
 
O(0, 0, 0, 0, 0, "lightyellow", True, 4)
# 準備標示出4個點的座標 (放大 5 倍)
cgo.drawText("各點的座標值放大5倍", (-6.8397*5)-50, (-1.4894*5)+20, {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
# 左上角點
cgo.drawText("(-6.8397, -1.4894)", (-6.8397*5)-50, (-1.4894*5), {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (-6.8397*5), (-1.4894*5), {"fillColor": "red"})
# 右上角點
cgo.drawText("(6.8397, -1.4894)", (6.8397*5)+50, (-1.4894*5)+20, {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (6.8397*5), (-1.4894*5), {"fillColor": "red"})
# 左下角點
cgo.drawText("(-6.8397, -18.511)", (-6.8397*5)-50, (-18.511*5), {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (-6.8397*5), (-18.511*5), {"fillColor": "red"})
# 右下角點
cgo.drawText("(6.8397, -18.511)", (6.8397*5)+50, (-18.511*5), {"fontSize": 12, "fontWeight": 1200, "lorg":5 })
cgo.drawShape(shapedefs.circle(4), (6.8397*5), (-18.511*5), {"fillColor": "red"})
</script>

上述 2D 鏈條輪廓繪圖因為採用 Cango 與 Brython, 可以直接利用 Javascript 在 html 網頁上執行繪圖, 此特點與 PTC Creo Parametric 中的 Pro/Web.Link 3D 零組件繪圖模式相同, 但是為了要能夠利用雲端網際環境進行協同, 還必須要透過 Web Server based 的 Python3 wsgi 程式來派送 2D 與 3D 零組件的繪圖 (也可以採用 Java, Node.js 或其他 Web Server based 的程式方法完成).

這裡的 Web Based Server 程式採用 Python3 與 Flask, 並且可以在近端與 <a href="https://www.openshift.com/">Openshift</a> 雲端派送上述的 2D 鏈條輪廓繪圖, 而此一協同架構隨後將應用到 PTC Creo Parametric 中的 Pro/Web.Link 3D 零組件繪圖, 比較不同的是, 在 Windows 環境下, Pro/Web.Link 的執行只能在嵌入式的 IE 瀏覽器中執行, 而且無法與支援較新 Javascript 版本的 Brython 結合. 換言之, 隨後的 Pro/Web.Link 3D 零組件繪圖, 必須採用純 Javascript 程式, 而且只能在 Creo Parametric 的嵌入式 IE 中執行.

##Github cdw2 倉儲協同規劃

接下來, 為了要能夠在 Github 倉儲中實現近端與 <a href="https://www.openshift.com/">Openshift</a> 平台上的 Python3 <a href="http://flask.pocoo.org/">Flask</a> wsgi 程式 2D 零組件繪圖, 同時利用 <a href="https://help.github.com/categories/github-pages-basics/">Github Pages</a> 來集結各組所完成的期中報告結果, 我們決定要將 cdw2 倉儲分為 master 與 gh-pages 的分支版本, 而且不可合併. cdw2 的 master 可以直接在近端完成 2D 零組件繪圖, 而且同一組程式將利用 git remote add 由各組組員送到各自的 <a href="https://www.openshift.com/">Openshift</a> Python3 應用程式上執行, 而且各組員所完成的期中報告結果, 可以利用 cdw2 倉儲中的 gh-pages 分支, 以 <a href="https://github.com/getpelican/pelican">Pelican 靜態網誌</a>的架構執行協同內容管理.

2D 零組件協同繪圖 (注意畫布名稱必須與上列繪圖名稱不同):

<pre class="brush: xml;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;網際 2D 繪圖&lt;/title&gt;
    &lt;!-- IE 9: display inline SVG --&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=9"&gt;
&lt;script type="text/javascript" src="http://brython.info/src/brython_dist.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango-8v03.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango2D-6v13.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/CangoAxes-1v33.js"&gt;&lt;/script&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;script&gt;
window.onload=function(){
brython(1);
}
&lt;/script&gt;
 
&lt;canvas id="plotarea2" width="800" height="800"&gt;&lt;/canvas&gt;
 
&lt;script type="text/python"&gt;
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea2")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
# 決定要不要畫座標軸線
cgo.drawAxes(0, 240, 0, 240, {
    "strokeColor":"#aaaaaa",
    "fillColor": "#aaaaaa",
    "xTickInterval": 20,
    "xLabelInterval": 20,
    "yTickInterval": 20,
    "yLabelInterval": 20})
 
deg = math.pi/180  
def O(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
 
    # 放大 5 倍
    cgo.render(cmbr, x, y, 5, rot)
 
O(0, 0, 0, 0, 0, "red", True, 4)
&lt;/script&gt;
&lt;!-- 以下為第2位組員的零件繪圖 --&gt;
&lt;script type="text/python"&gt;
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea2")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
deg = math.pi/180  
def O2(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
    
    # 複製 cmbr, 然後命名為 basic1
    basic1 = cmbr.dup()
    # basic1 轉 120 度
    basic1.rotate(120)
 
    # 放大 5 倍
    cgo.render(basic1, x, y, 5, rot)
 
O2(0, 0, 0, 0, 0, "blue", True, 4)
&lt;/script&gt;
&lt;!-- 以下為第3位組員的零件繪圖 --&gt;
&lt;script type="text/python"&gt;
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea2")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
deg = math.pi/180  
def O3(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
    
    # 複製 cmbr, 然後命名為 basic1
    basic1 = cmbr.dup()
    # basic1 轉 90 度
    basic1.rotate(90)
    # 平移到 O2 的鏈條端點
    basic1.translate(20*math.cos(30*deg), 20*math.sin(30*deg))
 
    # 放大 5 倍
    cgo.render(basic1, x, y, 5, rot)
 
O3(0, 0, 0, 0, 0, "green", True, 4)
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

2D 協同繪圖結果如下:

<script type="text/javascript" src="http://brython.info/src/brython_dist.js"></script>
<script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango-8v03.js"></script>
<script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/Cango2D-6v13.js"></script>
<script type="text/javascript" src="http://cptocadp-2015fallhw.rhcloud.com/static/CangoAxes-1v33.js"></script>

<script>
window.onload=function(){
brython(1);
}
</script>
 
<canvas id="plotarea2" width="800" height="800"></canvas>
 
<script type="text/python">
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea2")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
# 決定要不要畫座標軸線
cgo.drawAxes(0, 240, 0, 240, {
    "strokeColor":"#aaaaaa",
    "fillColor": "#aaaaaa",
    "xTickInterval": 20,
    "xLabelInterval": 20,
    "yTickInterval": 20,
    "yLabelInterval": 20})
 
deg = math.pi/180  
def O(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
 
    # 放大 5 倍
    cgo.render(cmbr, x, y, 5, rot)
 
O(0, 0, 0, 0, 0, "red", True, 4)
</script>
<!-- 以下為第2位組員的零件繪圖 -->
<script type="text/python">
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea2")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
deg = math.pi/180  
def O2(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
    
    # 複製 cmbr, 然後命名為 basic1
    basic1 = cmbr.dup()
    # basic1 轉 120 度
    basic1.rotate(120)
 
    # 放大 5 倍
    cgo.render(basic1, x, y, 5, rot)
 
O2(0, 0, 0, 0, 0, "blue", True, 4)
</script>
<!-- 以下為第3位組員的零件繪圖 -->
<script type="text/python">
from javascript import JSConstructor
from browser import window
import math
 
cango = JSConstructor(window.Cango)
cobj = JSConstructor(window.Cobj)
shapedefs = window.shapeDefs
obj2d = JSConstructor(window.Obj2D)
cgo = cango("plotarea2")
 
cgo.setWorldCoords(-250, -250, 500, 500) 
 
deg = math.pi/180  
def O3(x, y, rx, ry, rot, color, border, linewidth):
    # 旋轉必須要針對相對中心 rot not working yet
    chamber = "M -6.8397, -1.4894 \
            A 7, 7, 0, 1, 0, 6.8397, -1.4894 \
            A 40, 40, 0, 0, 1, 6.8397, -18.511 \
            A 7, 7, 0, 1, 0, -6.8397, -18.511 \
            A 40, 40, 0, 0, 1, -6.8397, -1.4894 z"
    cgoChamber = window.svgToCgoSVG(chamber)
    cmbr = cobj(cgoChamber, "SHAPE", {
            "fillColor": color,
            "border": border,
            "strokeColor": "tan",
            "lineWidth": linewidth })
    
    # hole 為原點位置
    hole = cobj(shapedefs.circle(4), "PATH")
    cmbr.appendPath(hole)
    
    # 複製 cmbr, 然後命名為 basic1
    basic1 = cmbr.dup()
    # basic1 轉 90 度
    basic1.rotate(90)
    # 平移到 O2 的鏈條端點
    basic1.translate(20*math.cos(30*deg), 20*math.sin(30*deg))
 
    # 放大 5 倍
    cgo.render(basic1, x, y, 5, rot)
 
O3(0, 0, 0, 0, 0, "green", True, 4)
</script>

完成上述 2D 零組件協同繪圖後, 各組組長就可以直接將 cdw2 master 分支上的 wsgi 程式, 先在本地端測試無誤後, 再提交推送到 2015fallhw/cdw2, 若為組員則需透過 pull request, 以拉回請求的方式, 要求組長將 master 分支上的 wsgi 改版資料, 設法合併到 2015fallhw/cdw2 倉儲中.

這裡利用 scrum1 示範帳號, 將上述 2D 零組件繪圖程式提交推送到 2015fallhw/cdw2 後, 再利用 git remote add openshift ssh://123e6d7b22d5271fb220000c9@cdw2-ladisai.rhcloud.com/~/git/cdw2.git/, 透過 /home/.ssh/id_rsa 中 OpenSSL 格式的 private key, 與 Openshift 應用程式上 settings 中的 public key 對應, 取得權限後, 以 git push openshift 將 cdw2 master 的資料送到 Openshift 平台上執行, 所得結果為:

<a href="http://cdw2-ladisai.rhcloud.com/ag100/scrum1_demo1">http://cdw2-ladisai.rhcloud.com/ag100/scrum1_demo1</a>

<a href="http://cdw2-ladisai.rhcloud.com/ag100/scrum1_demo2">http://cdw2-ladisai.rhcloud.com/ag100/scrum1_demo2</a>

<a href="http://cdw2-ladisai.rhcloud.com/ag100/scrum1_demo3">http://cdw2-ladisai.rhcloud.com/ag100/scrum1_demo3</a>

所對應的 2015fallhw/cdw2 提交版本為: <a href="https://github.com/2015fallhw/cdw2/tree/92ccd643061f2fb43030a9423c825f425963d481">https://github.com/2015fallhw/cdw2/tree/92ccd643061f2fb43030a9423c825f425963d481</a>

scrum1_task1.py 版本為: <a href="https://github.com/2015fallhw/cdw2/blob/92ccd643061f2fb43030a9423c825f425963d481/users/s2a/g100/scrum1_task1.py">https://github.com/2015fallhw/cdw2/blob/92ccd643061f2fb43030a9423c825f425963d481/users/s2a/g100/scrum1_task1.py</a>

scrum2_task1.py 版本則為: <a href="https://github.com/2015fallhw/cdw2/blob/92ccd643061f2fb43030a9423c825f425963d481/users/s2a/g100/scrum2_task1.py">https://github.com/2015fallhw/cdw2/blob/92ccd643061f2fb43030a9423c825f425963d481/users/s2a/g100/scrum2_task1.py</a>

